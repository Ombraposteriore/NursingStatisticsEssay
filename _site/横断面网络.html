<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>横断面网络</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./网络比较.html" rel="next">
<link href="./基础知识.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./横断面网络.html">网络分析实战</a></li><li class="breadcrumb-item"><a href="./横断面网络.html">横断面网络</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
        <div class="sidebar-tools-collapse">
    <a href="https://twitter.com" rel="" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-twitter"></i></a>
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label=""><i class="bi bi-github"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-collapse-item" href="https://code.com">
            Source Code
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-collapse-item" href="https://bugs.com">
            Report a Bug
            </a>
          </li>
      </ul>
    </div>
</div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">关于本书</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./基础知识.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">基础知识</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">网络分析实战</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./横断面网络.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">横断面网络</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./网络比较.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">网络比较</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./有调节的网络.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">有调节的网络</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./交叉滞后网络.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">交叉滞后网络</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./时间网络分析.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">时间网络分析</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#导入工具包" id="toc-导入工具包" class="nav-link active" data-scroll-target="#导入工具包">1 导入工具包</a></li>
  <li><a href="#整理数据" id="toc-整理数据" class="nav-link" data-scroll-target="#整理数据">2 整理数据</a></li>
  <li><a href="#可视化网络模型" id="toc-可视化网络模型" class="nav-link" data-scroll-target="#可视化网络模型">3 可视化网络模型</a></li>
  <li><a href="#另一种建模方法" id="toc-另一种建模方法" class="nav-link" data-scroll-target="#另一种建模方法">4 另一种建模方法</a></li>
  <li><a href="#计算中心性指标" id="toc-计算中心性指标" class="nav-link" data-scroll-target="#计算中心性指标">5 计算中心性指标</a></li>
  <li><a href="#桥梁节点分析" id="toc-桥梁节点分析" class="nav-link" data-scroll-target="#桥梁节点分析">6 桥梁节点分析</a></li>
  <li><a href="#计算可预测性" id="toc-计算可预测性" class="nav-link" data-scroll-target="#计算可预测性">7 计算可预测性</a></li>
  <li><a href="#精确性稳定性差异性分析" id="toc-精确性稳定性差异性分析" class="nav-link" data-scroll-target="#精确性稳定性差异性分析">8 精确性、稳定性、差异性分析</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">横断面网络</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>从这节开始，将分段演示如何采用R软件进行各种网络分析建模，主要内容请见右上角的目录。</p>
<p>为避免出现版本兼容性问题，大家可以先看看我使用的编程环境（见文末）。</p>
<section id="导入工具包" class="level3">
<h3 class="anchored" data-anchor-id="导入工具包">1 导入工具包</h3>
<p>依次导入下面六个包，第一个和第六个包是辅助包，提供了一些不错的工具；第二个是本期分析主要使用的包，第三个包提供了一些本次会用到的数据，第四个第五个是非常关键的包，包括但不限于用于计算稳定性和可预测性。</p>
<p>如果你还没安装，请先执行被注释掉的”install.packages”语句。</p>
</section>
<section id="整理数据" class="level3">
<h3 class="anchored" data-anchor-id="整理数据">2 整理数据</h3>
<p>这里使用的是bfi人格问卷数据，这份数据是R语言内置的公开数据集。具体细节请使用?psych::bfi查询。</p>
<p>网络分析比较吃硬件资源，所以这次我们仅选取少量数据进行分析：500x15，即500人，15个条目。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>md <span class="ot">=</span> bfi[<span class="dv">1</span><span class="sc">:</span><span class="dv">500</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>] </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(md)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   500 obs. of  15 variables:
 $ A1: int  2 2 5 4 2 6 2 4 4 2 ...
 $ A2: int  4 4 4 4 3 6 5 3 3 5 ...
 $ A3: int  3 5 5 6 3 5 5 1 6 6 ...
 $ A4: int  4 2 4 5 4 6 3 5 3 6 ...
 $ A5: int  4 5 4 5 5 5 5 1 3 5 ...
 $ C1: int  2 5 4 4 4 6 5 3 6 6 ...
 $ C2: int  3 4 5 4 4 6 4 2 6 5 ...
 $ C3: int  3 4 4 3 5 6 4 4 3 6 ...
 $ C4: int  4 3 2 5 3 1 2 2 4 2 ...
 $ C5: int  4 4 5 5 2 3 3 4 5 1 ...
 $ E1: int  3 1 2 5 2 2 4 3 5 2 ...
 $ E2: int  3 1 4 3 2 1 3 6 3 2 ...
 $ E3: int  3 6 4 4 5 6 4 4 NA 4 ...
 $ E4: int  4 4 4 4 4 5 5 2 4 5 ...
 $ E5: int  4 3 5 4 5 6 5 1 3 5 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(md)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      A1 A2 A3 A4 A5 C1 C2 C3 C4 C5 E1 E2 E3 E4 E5
61617  2  4  3  4  4  2  3  3  4  4  3  3  3  4  4
61618  2  4  5  2  5  5  4  4  3  4  1  1  6  4  3
61620  5  4  5  4  4  4  5  4  2  5  2  4  4  4  5
61621  4  4  6  5  5  4  4  3  5  5  5  3  4  4  4
61622  2  3  3  4  5  4  4  5  3  2  2  2  5  4  5
61623  6  6  5  6  5  6  6  6  1  3  2  1  6  5  6</code></pre>
</div>
</div>
<p>由于横断面网络分析不能有缺失值，所以来个简单处理：剔除有缺失值的行。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>md<span class="ot">=</span><span class="fu">na.omit</span>(md)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(md)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   468 obs. of  15 variables:
 $ A1: int  2 2 5 4 2 6 2 4 2 4 ...
 $ A2: int  4 4 4 4 3 6 5 3 5 4 ...
 $ A3: int  3 5 5 6 3 5 5 1 6 5 ...
 $ A4: int  4 2 4 5 4 6 3 5 6 6 ...
 $ A5: int  4 5 4 5 5 5 5 1 5 5 ...
 $ C1: int  2 5 4 4 4 6 5 3 6 4 ...
 $ C2: int  3 4 5 4 4 6 4 2 5 3 ...
 $ C3: int  3 4 4 3 5 6 4 4 6 5 ...
 $ C4: int  4 3 2 5 3 1 2 2 2 3 ...
 $ C5: int  4 4 5 5 2 3 3 4 1 2 ...
 $ E1: int  3 1 2 5 2 2 4 3 2 1 ...
 $ E2: int  3 1 4 3 2 1 3 6 2 3 ...
 $ E3: int  3 6 4 4 5 6 4 4 4 2 ...
 $ E4: int  4 4 4 4 4 5 5 2 5 5 ...
 $ E5: int  4 3 5 4 5 6 5 1 5 4 ...
 - attr(*, "na.action")= 'omit' Named int [1:32] 9 63 66 72 90 107 112 130 133 168 ...
  ..- attr(*, "names")= chr [1:32] "61630" "61754" "61759" "61772" ...</code></pre>
</div>
</div>
</section>
<section id="可视化网络模型" class="level3">
<h3 class="anchored" data-anchor-id="可视化网络模型">3 可视化网络模型</h3>
<p>一般有如下几个步骤：计算相关或者偏相关矩阵；分配组（可以是症状群，可以不用）；建模并可视化。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 计算相关矩阵</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>CorMat<span class="ot">=</span><span class="fu">cor_auto</span>(md)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Variables detected as ordinal: A1; A2; A3; A4; A5; C1; C2; C3; C4; C5; E1; E2; E3; E4; E5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 模拟分组向量，具体请根据自己的研究来</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>groups<span class="ot">=</span><span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">'A'</span>,<span class="dv">5</span>),<span class="fu">rep</span>(<span class="st">'C'</span>,<span class="dv">5</span>),<span class="fu">rep</span>(<span class="st">'E'</span>,<span class="dv">5</span>))</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 默认参数建模</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>q <span class="ot">=</span> <span class="fu">qgraph</span>(CorMat,<span class="co">#相关矩阵</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">layout =</span> <span class="st">"spring"</span>,<span class="co">#图形布局算法</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">groups=</span>groups, <span class="co">#分组信息</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">details =</span> <span class="cn">TRUE</span>, <span class="co">#显示细节</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">theme=</span><span class="st">'colorblind'</span><span class="co">#主题</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>           ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="横断面网络_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>也可以不分组，看看效果。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>q1 <span class="ot">=</span> <span class="fu">qgraph</span>(CorMat,<span class="co">#相关矩阵</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">layout =</span> <span class="st">"spring"</span>,<span class="co">#图形布局算法</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">details =</span> <span class="cn">TRUE</span>, <span class="co">#显示细节</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">theme=</span><span class="st">'colorblind'</span><span class="co">#主题</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>           ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="横断面网络_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>你觉得图形不好看，自己根据函数的帮助文档自己调整参数。</p>
</section>
<section id="另一种建模方法" class="level3">
<h3 class="anchored" data-anchor-id="另一种建模方法">4 另一种建模方法</h3>
<p>发现了吗？横断面网络模型（同期网络）的建模和可视化是非常简单的，我一般喜欢用bootnet建模，当然了，由于设置的算法不同，这两者所得网络是有区别的，择其一即可。</p>
<p>这里我们使用强大的bootnet包，等下我们做稳定性、准确性分析都会用到它。</p>
<p>建模一行代码搞定，用默认参数问题不大。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estimate network</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 这里输入的是原始数据，采用EBICglasso算法计算输入矩阵</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>Network <span class="ot">=</span> <span class="fu">estimateNetwork</span>(md, <span class="at">default =</span> <span class="st">"EBICglasso"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Estimating Network. Using package::function:
  - qgraph::EBICglasso for EBIC model selection
    - using glasso::glasso</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot network</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(Network, <span class="at">layout =</span> <span class="st">'spring'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="横断面网络_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="计算中心性指标" class="level3">
<h3 class="anchored" data-anchor-id="计算中心性指标">5 计算中心性指标</h3>
<p>计算第一个网络模型的中心性指标，很轻松。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">centrality</span>(q)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$OutDegree
      A1       A2       A3       A4       A5       C1       C2       C3 
1.736067 4.136744 4.185174 3.459108 4.588298 3.147499 3.386425 2.647192 
      C4       C5       E1       E2       E3       E4       E5 
3.196841 3.106400 3.266836 4.002216 3.672419 4.181569 4.352452 

$InDegree
      A1       A2       A3       A4       A5       C1       C2       C3 
1.736067 4.136744 4.185174 3.459108 4.588298 3.147499 3.386425 2.647192 
      C4       C5       E1       E2       E3       E4       E5 
3.196841 3.106400 3.266836 4.002216 3.672419 4.181569 4.352452 

$Closeness
        A1         A2         A3         A4         A5         C1         C2 
0.01208905 0.01777845 0.01795918 0.01719543 0.01914391 0.01475588 0.01595325 
        C3         C4         C5         E1         E2         E3         E4 
0.01410542 0.01470529 0.01454764 0.01626079 0.01859869 0.01815438 0.01818626 
        E5 
0.02126792 

$Betweenness
A1 A2 A3 A4 A5 C1 C2 C3 C4 C5 E1 E2 E3 E4 E5 
 0 18  0  2  2  0  4  0  0  0  0  2  0  2 42 

$InExpectedInfluence
        A1         A2         A3         A4         A5         C1         C2 
-1.0911530  1.6851506  1.9382873  1.6382411  1.9301633  0.8583539  1.4462001 
        C3         C4         C5         E1         E2         E3         E4 
 1.1753135 -1.2361655 -1.3086316 -1.6998553 -1.9861568  1.5919209  1.5421715 
        E5 
 1.4202353 

$OutExpectedInfluence
        A1         A2         A3         A4         A5         C1         C2 
-1.0911530  1.6851506  1.9382873  1.6382411  1.9301633  0.8583539  1.4462001 
        C3         C4         C5         E1         E2         E3         E4 
 1.1753135 -1.2361655 -1.3086316 -1.6998553 -1.9861568  1.5919209  1.5421715 
        E5 
 1.4202353 

$ShortestPathLengths
         A1       A2       A3       A4       A5       C1       C2       C3
A1 0.000000 2.192380 3.519328 4.767491 4.025087 7.422075 8.220801 7.501337
A2 2.192380 0.000000 1.821282 2.575111 2.114002 5.229695 6.028421 5.308957
A3 3.519328 1.821282 0.000000 2.729549 1.723567 5.757156 5.666207 5.070742
A4 4.767491 2.575111 2.729549 0.000000 2.514570 5.766440 3.539533 5.569323
A5 4.025087 2.114002 1.723567 2.514570 0.000000 6.398416 5.521765 6.701127
C1 7.422075 5.229695 5.757156 5.766440 6.398416 0.000000 2.226907 2.892613
C2 8.220801 6.028421 5.666207 3.539533 5.521765 2.226907 0.000000 2.236184
C3 7.501337 5.308957 5.070742 5.569323 6.701127 2.892613 2.236184 0.000000
C4 7.325279 6.213435 6.957908 5.724084 6.002827 2.455908 2.184551 3.045985
C5 8.878911 6.859716 6.005458 4.284605 4.853824 3.886195 3.328085 2.940947
E1 6.292386 4.100005 4.166015 5.008539 3.107798 6.214881 5.338229 6.517591
E2 6.476632 4.284251 3.228590 4.074237 2.484376 4.568518 4.887529 6.066891
E3 5.225746 3.033365 2.739891 4.427392 2.241199 5.879803 5.003151 6.182513
E4 5.051349 2.858969 2.619437 2.938715 1.825769 5.394177 5.701641 6.881003
E5 5.820650 3.628270 3.676697 4.235405 2.721615 3.676801 2.800149 3.979511
         C4       C5       E1       E2       E3       E4       E5
A1 7.325279 8.878911 6.292386 6.476632 5.225746 5.051349 5.820650
A2 6.213435 6.859716 4.100005 4.284251 3.033365 2.858969 3.628270
A3 6.957908 6.005458 4.166015 3.228590 2.739891 2.619437 3.676697
A4 5.724084 4.284605 5.008539 4.074237 4.427392 2.938715 4.235405
A5 6.002827 4.853824 3.107798 2.484376 2.241199 1.825769 2.721615
C1 2.455908 3.886195 6.214881 4.568518 5.879803 5.394177 3.676801
C2 2.184551 3.328085 5.338229 4.887529 5.003151 5.701641 2.800149
C3 3.045985 2.940947 6.517591 6.066891 6.182513 6.881003 3.979511
C4 0.000000 1.956734 5.819291 5.368590 5.484213 6.182702 3.281211
C5 1.956734 0.000000 6.006993 4.300280 5.671915 6.297076 3.468913
E1 5.819291 6.006993 0.000000 1.768919 2.549088 2.069824 2.538080
E2 5.368590 4.300280 1.768919 0.000000 2.174253 1.996796 2.087379
E3 5.484213 5.671915 2.549088 2.174253 0.000000 2.267609 2.203002
E4 6.182702 6.297076 2.069824 1.996796 2.267609 0.000000 2.901491
E5 3.281211 3.468913 2.538080 2.087379 2.203002 2.901491 0.000000

$ShortestPaths
   A1   A2   A3   A4   A5   C1   C2   C3   C4   C5   E1   E2   E3   E4   E5  
A1 NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL
A2 NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL
A3 NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL
A4 NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL
A5 NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL
C1 NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL
C2 NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL
C3 NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL
C4 NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL
C5 NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL
E1 NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL
E2 NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL
E3 NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL
E4 NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL
E5 NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL</code></pre>
</div>
</div>
<p>强度中心性报告了OutDegree与InDegree，但由于是横断面网络模型，所以它们是一样的，在有向图模型中，它们就会有差异了。</p>
<p>可视化中心性指标：</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">centralityPlot</span>(q, <span class="at">include=</span><span class="fu">c</span>(<span class="st">"Strength"</span>,</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'ExpectedInfluence'</span>,</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'Closeness'</span>,</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Betweenness"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 5 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="横断面网络_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>由于没有进行标准化处理，所以有些指标的x轴刻度范围有些大。可以加一个scale参数进行控制。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">centralityPlot</span>(q, <span class="at">include=</span><span class="fu">c</span>(<span class="st">"Strength"</span>,</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'ExpectedInfluence'</span>,</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'Closeness'</span>,</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Betweenness"</span>),</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>                            <span class="at">scale =</span> <span class="st">"z-scores"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Note: z-scores are shown on x-axis rather than raw centrality indices.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="横断面网络_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="桥梁节点分析" class="level3">
<h3 class="anchored" data-anchor-id="桥梁节点分析">6 桥梁节点分析</h3>
<p>在网络分析中，桥梁节点（Bridge Node）是指那些在不同社区或群组之间起到连接作用的节点。它们在网络中扮演着沟通不同群体的关键角色。桥梁节点的概念有助于识别那些在网络中可能对信息流通和群体间联系至关重要的节点。</p>
<p>桥梁节点（桥梁症状）的识别通常涉及到计算所谓的”桥梁中心性”（Bridge Centrality），这是一种网络分析中用来识别节点在不同社区或群体间重要性的指标，同样包括3种：桥梁强度、桥梁紧密度、桥梁中介性。桥梁中心性可以通过不同的方法来计算，这里就不展开描述了。</p>
<p>桥梁中心性的计算用代码很容易搞定：</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bridge</span>(CorMat, <span class="at">communities=</span> groups, <span class="at">directed=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$`Bridge Strength`
       A1        A2        A3        A4        A5        C1        C2        C3 
0.6192786 2.2701858 2.4054126 2.1786558 2.8889458 1.6882345 1.7319479 1.1859660 
       C4        C5        E1        E2        E3        E4        E5 
1.4925433 1.6975235 1.4320906 1.9970992 1.9252748 2.4119903 2.6808076 

$`Bridge Betweenness`
A1 A2 A3 A4 A5 C1 C2 C3 C4 C5 E1 E2 E3 E4 E5 
28  0  0  0  0  0  1  0 24  0  0  1  0  0 39 

$`Bridge Closeness`
        A1         A2         A3         A4         A5         C1         C2 
0.06040055 0.06449706 0.06464877 0.06334587 0.06633877 0.07740360 0.08148539 
        C3         C4         C5         E1         E2         E3         E4 
0.07593488 0.04662243 0.04377595 0.03678090 0.03806534 0.09428918 0.09357638 
        E5 
0.10564254 

$`Bridge Expected Influence (1-step)`
         A1          A2          A3          A4          A5          C1 
 0.02563498  0.73084283  0.72681593  0.61394087  0.72769426  0.72809473 
         C2          C3          C4          C5          E1          E2 
 1.30818928  1.05074235 -0.55397879 -0.92186642 -0.99574380 -1.11167378 
         E3          E4          E5 
 1.54922696  1.74046318  1.49472703 

$`Bridge Expected Influence (2-step)`
       A1        A2        A3        A4        A5        C1        C2        C3 
-1.003904  2.697975  2.833111  2.472744  2.982608  4.686390  5.172403  4.114575 
       C4        C5        E1        E2        E3        E4        E5 
-4.503411 -4.723141 -5.295025 -6.277542  6.184953  6.796393  6.512929 

$communities
 [1] "A" "A" "A" "A" "A" "C" "C" "C" "C" "C" "E" "E" "E" "E" "E"</code></pre>
</div>
</div>
<p>不但给出了3个桥梁中心性指标，还给出了预期影响（一步法、两步法都有）。可视化也是很容易的：</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">#可视化桥梁症状网络</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>b <span class="ot">=</span> <span class="fu">bridge</span>(CorMat, <span class="at">communities=</span> groups, <span class="at">directed=</span>F) </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(b, </span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">include=</span><span class="fu">c</span>(<span class="st">"Bridge Expected Influence (2-step)"</span>, <span class="st">"Bridge Strength"</span>, <span class="st">"Bridge Closeness"</span>), <span class="co">#选择要呈现的指标</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">theme_bw=</span>F, </span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">raw0 =</span> T, </span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>     <span class="at">signed=</span>T,</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>     <span class="at">zscore=</span>T,     <span class="co">#标准化</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>     <span class="at">order=</span><span class="st">"value"</span>  <span class="co">#排序</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>     ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Vectorized input to `element_text()` is not officially supported.
ℹ Results may be unexpected or may change in future versions of ggplot2.
Vectorized input to `element_text()` is not officially supported.
ℹ Results may be unexpected or may change in future versions of ggplot2.
Vectorized input to `element_text()` is not officially supported.
ℹ Results may be unexpected or may change in future versions of ggplot2.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="横断面网络_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>看到一些研究者在文献中推荐用桥梁强度最大的节点作为桥梁节点，但也有文献认为应使用第80百分位数的桥梁强度/预期影响截止值选择桥梁症状。这里演示下如何用桥梁强度查询符合条件的节点。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>choose_set <span class="ot">=</span> b<span class="sc">$</span><span class="st">`</span><span class="at">Bridge Strength</span><span class="st">`</span><span class="sc">&gt;</span><span class="fu">quantile</span>(b<span class="sc">$</span><span class="st">`</span><span class="at">Bridge Strength</span><span class="st">`</span>,</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>                             <span class="at">probs =</span> <span class="fl">0.8</span>,</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>                             <span class="at">na.rm =</span> T)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>node_name <span class="ot">=</span> b<span class="sc">$</span><span class="st">`</span><span class="at">Bridge Strength</span><span class="st">`</span>[choose_set]</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>node_name</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      A5       E4       E5 
2.888946 2.411990 2.680808 </code></pre>
</div>
</div>
<p>可以看到，15个症状节点里面，有3个症状符合条件。如果你需要对其进行可视化，可以先标记出来，然后将其传入qgraph函数的groups参数。</p>
</section>
<section id="计算可预测性" class="level3">
<h3 class="anchored" data-anchor-id="计算可预测性">7 计算可预测性</h3>
<p>有些学者不推荐在同期/横断面网络分析中计算可预测性，但个人认为这是个不错的指标，相当于做了很多次回归分析，可以分析其他变量对节点的影响。计算方法其实很简单，这里演示下如何进行计算并对其进行可视化。</p>
<p>用mgm包建模：</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mgm需要输入矩阵形式的数据，所以先做转换</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>mat_data <span class="ot">=</span> <span class="fu">as.matrix</span>(md)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 建模，参数调整的细节请看帮助文档，在后续的混合建模中也会讲到</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>pre_mod <span class="ot">=</span> <span class="fu">mgm</span>(<span class="at">data =</span> mat_data,</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>                   <span class="at">type =</span> <span class="fu">rep</span>(<span class="st">'g'</span>,<span class="dv">15</span>),</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>                   <span class="at">level =</span> <span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">15</span>),</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>                   <span class="at">lambdaSel =</span> <span class="st">"CV"</span>,</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>                   <span class="at">ruleReg =</span> <span class="st">"AND"</span>, </span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>                   <span class="co"># pbar = T, </span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>                   <span class="at">overparameterize =</span> F, </span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>                   <span class="at">signInfo =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |-----                                                                 |   7%
  |                                                                            
  |---------                                                             |  13%
  |                                                                            
  |--------------                                                        |  20%
  |                                                                            
  |-------------------                                                   |  27%
  |                                                                            
  |-----------------------                                               |  33%
  |                                                                            
  |----------------------------                                          |  40%
  |                                                                            
  |---------------------------------                                     |  47%
  |                                                                            
  |-------------------------------------                                 |  53%
  |                                                                            
  |------------------------------------------                            |  60%
  |                                                                            
  |-----------------------------------------------                       |  67%
  |                                                                            
  |---------------------------------------------------                   |  73%
  |                                                                            
  |--------------------------------------------------------              |  80%
  |                                                                            
  |-------------------------------------------------------------         |  87%
  |                                                                            
  |-----------------------------------------------------------------     |  93%
  |                                                                            
  |----------------------------------------------------------------------| 100%</code></pre>
</div>
</div>
<p>速度是很快的，建模后通过预测函数提取可预测性值：</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>pred_mgm <span class="ot">=</span> <span class="fu">predict</span>(<span class="at">object =</span> pre_mod, </span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">data =</span> mat_data,</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">errorCon =</span> <span class="fu">c</span>(<span class="st">"R2"</span>))</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>pred_mgm<span class="sc">$</span>errors</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Variable    R2
1        A1 0.197
2        A2 0.403
3        A3 0.376
4        A4 0.227
5        A5 0.444
6        C1 0.244
7        C2 0.355
8        C3 0.266
9        C4 0.349
10       C5 0.286
11       E1 0.334
12       E2 0.424
13       E3 0.323
14       E4 0.404
15       E5 0.357</code></pre>
</div>
</div>
<p>有兴趣的话，你也可以对这个值进行排序。由于本节内容很多，就不展示具体操作了。</p>
<p>接下来，建立网络模型并绘制带有可预测性值的网络图：</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>Network2 <span class="ot">=</span> <span class="fu">estimateNetwork</span>(mat_data, <span class="at">default =</span> <span class="st">"EBICglasso"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Estimating Network. Using package::function:
  - qgraph::EBICglasso for EBIC model selection
    - using glasso::glasso</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(Network2,</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">layout =</span> <span class="st">"spring"</span>,</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">pie=</span>pred_mgm<span class="sc">$</span>errors[,<span class="dv">2</span>]</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>     )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="横断面网络_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="精确性稳定性差异性分析" class="level3">
<h3 class="anchored" data-anchor-id="精确性稳定性差异性分析">8 精确性、稳定性、差异性分析</h3>
<p>ok，接下来就该进行精确性、稳定性以及差异性分析了，由于涉及到重抽样，这个步骤需要花费一些时间，具体看你的电脑配置，演示时会尽量减少抽样次数。</p>
<p>我们继续用bootnet包进行分析：</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>baseboot <span class="ot">=</span> <span class="fu">bootnet</span>(md, </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">default =</span> <span class="st">"EBICglasso"</span>, </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">threshold =</span> <span class="cn">FALSE</span>,</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">type=</span><span class="st">"nonparametric"</span>, <span class="co">#选择非参数自举法</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">nCores =</span> <span class="dv">8</span>, <span class="co">#8线程，根据自己电脑配置来</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>                  <span class="at">statistics=</span><span class="st">"all"</span>,</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>                  <span class="at">nBoots=</span><span class="dv">500</span> </span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Estimating sample network...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Estimating Network. Using package::function:
  - qgraph::EBICglasso for EBIC model selection
    - using glasso::glasso</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Bootstrapping...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Computing statistics...</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>注意：nBoots默认为1000，为提高速度，这里减少了次数，真实研究至少1000次以上。</p>
</blockquote>
<p>绘制边缘权重精确性分析图：</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(baseboot, <span class="at">labels=</span><span class="cn">FALSE</span>, <span class="at">order=</span><span class="st">"sample"</span>) <span class="co">#默认绘制的统计量是edge</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="横断面网络_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>这个置信区间（阴影部分）还是有些宽的。绘制边缘权重差异性分析图：</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(baseboot,</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">statistics=</span><span class="st">'edge'</span>,</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">plot =</span> <span class="st">"difference"</span>, </span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">onlyNonZero =</span> T, </span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">order =</span> <span class="st">"sample"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Expected significance level given number of bootstrap samples is approximately: 0.05</code></pre>
</div>
<div class="cell-output-display">
<p><img src="横断面网络_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>你是否会困惑：怎么看这幅图？答案是看黑格子数，黑色方格表示的是有两条边之间有显著差异，由于上面已经写了排序的代码，所以直接看y轴就可以了，越高的位置表示此edge与越多的其余edge有显著差异。这个例子，C4-C5与和E1-E2的边缘权重与其他有显著差别。</p>
<p>同样，可以检验不同节点中心性之间的差异：</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(baseboot, <span class="at">statistics=</span><span class="st">"Strength"</span>, <span class="at">plot=</span><span class="st">"difference"</span>,<span class="at">order =</span> <span class="st">"mean"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Expected significance level given number of bootstrap samples is approximately: 0.05</code></pre>
</div>
<div class="cell-output-display">
<p><img src="横断面网络_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>解释方法同前。上面是图形展示，当然是可以直接计算数值的，这里就不展示了，有需求的话，可以通过护理统计随笔公众号或者微信留言，会考虑通过更新的方式进行补充。</p>
<p>中心性指标的稳定性也是可以通过bootnet进行计算：</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 采用剔除案例法</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>caseboot <span class="ot">=</span> <span class="fu">bootnet</span>(md, </span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">nBoots =</span> <span class="dv">500</span>, </span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">nCores =</span> <span class="dv">12</span>, </span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>                   <span class="at">threshold =</span> <span class="cn">FALSE</span>, </span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>                   <span class="at">default =</span> <span class="st">"EBICglasso"</span>, </span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>                   <span class="at">type=</span><span class="st">"case"</span>, </span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>                   <span class="at">statistics=</span><span class="st">"all"</span>,</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>                   <span class="at">verbose =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p>注意：nBoots默认为1000，为提高速度，这里减少了次数，真实研究至少1000次以上。</p>
</blockquote>
<p>计算相关稳定性系数CS：</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">corStability</span>(caseboot) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=== Correlation Stability Analysis === 

Sampling levels tested:
   nPerson Drop%  n
1      117  75.0 42
2      153  67.3 55
3      190  59.4 38
4      226  51.7 55
5      263  43.8 61
6      299  36.1 53
7      335  28.4 45
8      372  20.5 48
9      408  12.8 60
10     445   4.9 43

Maximum drop proportions to retain correlation of 0.7 in at least 95% of the samples:

betweenness: 0.128 
  - For more accuracy, run bootnet(..., caseMin = 0.049, caseMax = 0.205) 

closeness: 0.284 
  - For more accuracy, run bootnet(..., caseMin = 0.205, caseMax = 0.361) 

distance: 0.594 
  - For more accuracy, run bootnet(..., caseMin = 0.517, caseMax = 0.673) 

edge: 0.594 
  - For more accuracy, run bootnet(..., caseMin = 0.517, caseMax = 0.673) 

eigenvector: 0.594 
  - For more accuracy, run bootnet(..., caseMin = 0.517, caseMax = 0.673) 

expectedInfluence: 0.594 
  - For more accuracy, run bootnet(..., caseMin = 0.517, caseMax = 0.673) 

hybrid: 0.438 
  - For more accuracy, run bootnet(..., caseMin = 0.361, caseMax = 0.517) 

length: 0 
  - For more accuracy, run bootnet(..., caseMin = 0, caseMax = 0.049) 

rspbc: 0.594 
  - For more accuracy, run bootnet(..., caseMin = 0.517, caseMax = 0.673) 

strength: 0.594 
  - For more accuracy, run bootnet(..., caseMin = 0.517, caseMax = 0.673) 

Accuracy can also be increased by increasing both 'nBoots' and 'caseN'.</code></pre>
</div>
</div>
<p>绘图:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(caseboot, <span class="at">statistics=</span><span class="st">"all"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="横断面网络_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>选几个指标来绘图：</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(caseboot, <span class="at">statistics =</span> <span class="fu">c</span>(<span class="st">"Strength"</span>,<span class="st">"Closeness"</span>,</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"expectedInfluence"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="横断面网络_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>运行环境：</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.3.2 (2023-10-31 ucrt)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 19045)

Matrix products: default


locale:
[1] LC_COLLATE=Chinese (Simplified)_China.utf8 
[2] LC_CTYPE=Chinese (Simplified)_China.utf8   
[3] LC_MONETARY=Chinese (Simplified)_China.utf8
[4] LC_NUMERIC=C                               
[5] LC_TIME=Chinese (Simplified)_China.utf8    

time zone: Asia/Shanghai
tzcode source: internal

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] networktools_1.5.1 mgm_1.2-14         bootnet_1.6        ggplot2_3.5.0     
[5] psych_2.3.9        qgraph_1.9.8       psychTools_2.4.3  

loaded via a namespace (and not attached):
  [1] mnormt_2.1.1         pbapply_1.7-2        polynom_1.4-1       
  [4] gridExtra_2.3        fdrtool_1.2.17       rlang_1.1.3         
  [7] magrittr_2.0.3       e1071_1.7-13         compiler_4.3.2      
 [10] gdata_3.0.0          IsingSampler_0.2.3   png_0.1-8           
 [13] vctrs_0.6.4          reshape2_1.4.4       quadprog_1.5-8      
 [16] stringr_1.5.1        pkgconfig_2.0.3      shape_1.4.6         
 [19] fastmap_1.1.1        backports_1.4.1      labeling_0.4.3      
 [22] pbivnorm_0.6.0       utf8_1.2.4           rmarkdown_2.25      
 [25] NetworkToolbox_1.4.2 heplots_1.6.0        nloptr_2.0.3        
 [28] purrr_1.0.2          xfun_0.41            glmnet_4.1-8        
 [31] jomo_2.7-6           jsonlite_1.8.7       pan_1.9             
 [34] jpeg_0.1-10          broom_1.0.5          parallel_4.3.2      
 [37] lavaan_0.6-17        cluster_2.1.4        R6_2.5.1            
 [40] stringi_1.8.1        RColorBrewer_1.1-3   smacof_2.1-5        
 [43] car_3.1-2            boot_1.3-28.1        rpart_4.1.21        
 [46] Rcpp_1.0.11          iterators_1.0.14     knitr_1.45          
 [49] snow_0.4-4           base64enc_0.1-3      R.utils_2.12.3      
 [52] weights_1.0.4        Matrix_1.6-5         nnls_1.5            
 [55] splines_4.3.2        nnet_7.3-19          igraph_2.0.1.1      
 [58] tidyselect_1.2.0     rstudioapi_0.16.0    abind_1.4-5         
 [61] yaml_2.3.7           doParallel_1.0.17    codetools_0.2-19    
 [64] lattice_0.21-9       tibble_3.2.1         plyr_1.8.9          
 [67] withr_2.5.2          evaluate_0.23        foreign_0.8-85      
 [70] survival_3.5-7       proxy_0.4-27         pillar_1.9.0        
 [73] carData_3.0-5        mice_3.16.0          checkmate_2.3.0     
 [76] foreach_1.5.2        rtf_0.4-14.1         stats4_4.3.2        
 [79] IsingFit_0.4         ellipse_0.5.0        generics_0.1.3      
 [82] candisc_0.8-6        munsell_0.5.0        scales_1.3.0        
 [85] minqa_1.2.6          gtools_3.9.5         class_7.3-22        
 [88] glue_1.6.2           Hmisc_5.1-1          tools_4.3.2         
 [91] data.table_1.15.4    lme4_1.1-35.1        mvtnorm_1.2-3       
 [94] rgl_1.2.1            grid_4.3.2           plotrix_3.8-4       
 [97] tidyr_1.3.1          colorspace_2.1-0     nlme_3.1-163        
[100] htmlTable_2.4.2      eigenmodel_1.11      Formula_1.2-5       
[103] cli_3.6.2            fansi_1.0.5          dplyr_1.1.4         
[106] corpcor_1.6.10       glasso_1.11          gtable_0.3.4        
[109] R.methodsS3_1.8.2    digest_0.6.33        wordcloud_2.6       
[112] farver_2.1.1         htmlwidgets_1.6.2    htmltools_0.5.7     
[115] R.oo_1.25.0          lifecycle_1.0.4      mitml_0.4-5         
[118] MASS_7.3-60         </code></pre>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./基础知识.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">基础知识</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./网络比较.html" class="pagination-link">
        <span class="nav-page-text">网络比较</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>